name: Node

on:
    push:
        branches: [develop]
    pull_request:
        branches: [develop]

jobs:
    test:
        runs-on: ubuntu-latest
        strategy:
            matrix:
                version: [16^]
        steps:
            - uses: actions/checkout@v3
            - uses: actions/setup-node@v3
              with:
                  node-version: 16
                  cache: "npm"

            - name: Build-DB
              run: docker-compose build

            - name: Create-DB
              run: docker-compose up -d

            - name: Test
              working-directory: ./tests
              run: npm install
                cache: "npm"
              run: npm run test

    # build:
    #     needs: test
    #     runs-on: ubuntu-latest
    #     steps:
    #         - uses: actions/checkout@v3
    #         - name: Build
    #           run: go build -v main.go
